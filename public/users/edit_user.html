<div class="container" id="edit-user">
  <div class="row" style="margin-top:50px;margin-bottom:50px">
    <div class="col-md-offset-3 col-md-6">
      <div class="box">
        <h4 class="text-uppercase">Update your profile</h4>                
        <hr/>                
        <form name="formHolder.update" novalidate>
            <label style="font-size: 14px" class="alert alert-danger" ng-show="errMsg" ng-cloak ng-bind="errMsg"></label>                 
          <div class="form-group">
            <label for="firstname">Firstname</label>                        
            <input class="form-control" id="firstname" type="text" ng-required="true" name="firstname"  ng-model="users.firstname"/>
              <span ng-cloak class="error-message" ng-show="formHolder.update.firstname.$dirty && formHolder.update.firstname.$error.required">Firstname is required</span>
          </div>                    
          <div class="form-group">
            <label for="lastname">Lastname</label>                        
            <input class="form-control" type="text" ng-required="true" name="lastname" id="lastname" ng-model="users.lastname"/>
              <span ng-cloak class="error-message" ng-show="formHolder.update.lastname.$dirty && formHolder.update.lastname.$error.required">Lastname is required</span>
          </div>    
          <div class="form-group">
            <label for="username">Username</label>                        
            <input class="form-control" type="text" ng-required="true" name="username" id="username" ng-model="users.username"/>
              <span ng-cloak class="error-message" ng-show="formHolder.update.username.$dirty && formHolder.update.username.$error.required">Username is required</span>
          </div>
          <div class="form-group">
            <label for="gender">Gender</label>
            <select class="form-control" id="gender" name="gender" ng-required="true" ng-model="users.gender">
              <option value="">-- Select Sex --</option>                                
              <option value="Male" id="male">Male</option>                                
              <option value="Female" id="female" >Female</option>
            </select>
              <span ng-cloak class="error-message" ng-show="users.gender === '' && formHolder.update.gender.$dirty || formHolder.update.gender.$dirty && formHolder.update.gender.$error.required">Gender is required</span>
          </div>   
          <div class="form-group">
            <label for="email">Email</label>                        
            <input class="form-control" type="email" ng-required="true" name="email" id="email" ng-model="users.email"/>
              <span ng-cloak class="error-message" ng-show="formHolder.update.email.$dirty && formHolder.update.email.$invalid">Email is required in valid format</span>
          </div>
          <div class="form-group">
            <label for="mobile">Mobile</label>                        
            <input class="form-control" type="text" ng-required="true" name="mobile" id="mobile" ng-model="users.mobile" ng-pattern="/^(08|07|09)\d{9}$/"/>
              <span ng-cloak class="error-message" ng-show="formHolder.update.mobile.$dirty && formHolder.update.mobile.$error.required">Mobile is required</span>
              <span ng-show="formHolder.update.mobile.$dirty && !formHolder.update.mobile.$error.required && formHolder.update.mobile.$invalid" ng-cloak class="error-message">Invalid phone number format</span>
          </div>
          <div class="form-group">
            <label for="alt_mobile">Alternate mobile</label>                        
            <input class="form-control" type="text" name="alt_mobile" id="alt_mobile" ng-model="users.alt_mobile" ng-pattern="/^(08|07|09)\d{9}$/"/>
              <span ng-show="formHolder.update.alt_mobile.$dirty && formHolder.update.alt_mobile.$invalid" ng-cloak class="error-message">Invalid phone number format</span>
          </div>
          <div class="row">
            <div class="col-md-6">
              <button class="btn btn-primary" ng-click="update()"><i class="fa fa-sign-in"></i> Update           </button><span ng-show="notConnected" style="color:red">You are not connected</span>
            </div>
            <div class="col-md-6">
              <span style="color: green" ng-cloak ng-show="showUpdateMsg">Successfull update!!You will be redirected</span>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!--<script type="text/javascript">
    $(document).ready(function(){
        var user = JSON.parse(sessionStorage.getItem("user"));
        $("#firstname").val(user.firstname);
        $("#lastname").val(user.lastname);
        $("#username").val(user.username);
        $("#email").val(user.email);
        $("#male").attr("selected",user.gender == "Male");
        $("#female").attr("selected",user.gender == "Female");
        $("#mobile").val(user.mobile);
        $("#alt_mobile").val(user.alt_mobile);

        $("#update").click(function(event){
            event.preventDefault();
            var username = user.username,
            data={
              firstname:$("#firstname").val(),
              lastname:$("#lastname").val(),
              username:$("#username").val(),
              email:$("#email").val(),
              gender:$("#gender").val(),
              mobile:$("#mobile").val(),
              alt_mobile:$("#alt_mobile").val()
            };
            $.ajax({
              url:"/user/update-user",
              method:"post",
              data:{username:username,data:data},
              success:function(res,status,xhr){
                console.log(res);
                console.log(status);

              },error:function(err){
                console.log(err);
              }
            })
        });
    });
  </script>-->